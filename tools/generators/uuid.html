<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>UUID Generator â€“ ASDK Toolkit</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet" />

        <style>
            body {
                height: 100vh;
                display: flex;
                flex-direction: column;
            }
            #main {
                flex: 1 1 auto;
                padding: 1rem;
                overflow-y: auto;
            }
            @media (min-width: 768px) {
                #main {
                    max-width: 960px;
                    margin: 0 auto;
                }
            }
            header {
                padding: 0.5rem 0.75rem;
                border-bottom: 1px solid var(--bs-border-color);
            }
            #uuidOutput {
                font-family: "Inconsolata", monospace;
                word-break: break-all;
            }
        </style>
    </head>
    <body>
        <header class="d-flex align-items-center gap-3 flex-wrap">
            <h5 class="mb-0"><i class="bi bi-shuffle"></i> UUID Generator</h5>
            <div class="ms-auto d-flex align-items-center gap-2 flex-wrap">
                <select class="form-select form-select-sm" id="themeSelect" style="width: 130px" title="Select theme">
                    <option value="auto">Auto Theme</option>
                    <option value="light">Light Theme</option>
                    <option value="dark">Dark Theme</option>
                </select>
            </div>
        </header>

        <main id="main" class="container-fluid">
            <div class="row g-3 mb-3 align-items-end">
                <div class="col-md-4">
                    <label for="uuidCount" class="form-label">How many UUIDs?</label>
                    <input type="number" class="form-control" id="uuidCount" min="1" max="50" value="5" />
                </div>
                <div class="col-md-4">
                    <label for="uuidVersion" class="form-label">UUID Version</label>
                    <select class="form-select" id="uuidVersion" title="Select UUID version">
                        <option value="v4" selected>Version 4 (Random)</option>
                        <option value="v1">Version 1 (Time-based)</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <button id="generateBtn" class="btn btn-primary w-100"><i class="bi bi-arrow-repeat"></i> Generate</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>Generated UUIDs</span>
                    <button id="copyBtn" class="btn btn-sm btn-outline-secondary" title="Copy all to clipboard"><i class="bi bi-clipboard"></i> Copy All</button>
                </div>
                <div class="card-body">
                    <pre id="uuidOutput" class="mb-0 small text-body-secondary">Press Generate to create UUIDs.</pre>
                </div>
            </div>
        </main>

        <div class="p-2 text-center small border-top">
            <i class="bi bi-arrow-left-circle link-secondary"></i>
            <a href="https://theonlyasdk.github.io/asdk-toolkit" class="link-secondary" title="Go back to ASDK Toolkit"> Go back to ASDK Toolkit </a>
        </div>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            (($) => {
                // === THEME HANDLING ===
                const $theme = $("#themeSelect");
                function applyTheme(mode) {
                    if (mode === "auto") {
                        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
                        document.body.setAttribute("data-bs-theme", prefersDark ? "dark" : "light");
                    } else {
                        document.body.setAttribute("data-bs-theme", mode);
                    }
                }
                const storedMode = localStorage.getItem("asdk-toolkit-theme") || "auto";
                $theme.val(storedMode);
                applyTheme(storedMode);
                $theme.on("change", function () {
                    const val = $(this).val();
                    localStorage.setItem("asdk-toolkit-theme", val);
                    applyTheme(val);
                });

                // === UUID GENERATOR ===
                function generateUUIDv4() {
                    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
                        const r = (Math.random() * 16) | 0;
                        const v = c === "x" ? r : (r & 0x3) | 0x8;
                        return v.toString(16);
                    });
                }

                function generateUUIDv1() {
                    const now = Date.now();
                    const timeLow = (now & 0xffffffff).toString(16).padStart(8, "0");
                    const timeMid = ((now / 0x100000000) & 0xffff).toString(16).padStart(4, "0");
                    const timeHi = (((now / 0x1000000000000) & 0x0fff) | 0x1000).toString(16).padStart(4, "0");
                    const clockSeq = ((Math.random() * 0x3fff) | 0x8000).toString(16).padStart(4, "0");
                    const node = Array.from({ length: 6 }, () =>
                        Math.floor(Math.random() * 256)
                            .toString(16)
                            .padStart(2, "0"),
                    ).join("");
                    return `${timeLow}-${timeMid}-${timeHi}-${clockSeq}-${node}`;
                }

                $("#generateBtn").on("click", () => {
                    const count = Math.min(Math.max(parseInt($("#uuidCount").val()) || 1, 1), 50);
                    const version = $("#uuidVersion").val();
                    const uuids = [];

                    for (let i = 0; i < count; i++) {
                        uuids.push(version === "v1" ? generateUUIDv1() : generateUUIDv4());
                    }
                    $("#uuidOutput").text(uuids.join("\n")).removeClass("text-body-secondary");
                });

                $("#copyBtn").on("click", function () {
                    const text = $("#uuidOutput").text();
                    if (!text || text.startsWith("Press")) return;
                    navigator.clipboard.writeText(text);
                    $(this).html('<i class="bi bi-clipboard-check"></i> Copied!');
                    setTimeout(() => $(this).html('<i class="bi bi-clipboard"></i> Copy All'), 1500);
                });
            })(jQuery);
        </script>
    </body>
</html>
